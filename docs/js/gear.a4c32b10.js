(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["gear"],{"4d0a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{attrs:{dense:""}},[a("v-col",[a("gear-table-filter",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("v-divider",{staticClass:"mt-1"}),a("gear-table",{attrs:{gears:e.filteredGears},on:{"edit-gear":e.editGear}})],1)],1),a("v-btn",{attrs:{bottom:"",fab:"",fixed:"",right:""},on:{click:e.createGear}},[a("v-icon",[e._v("mdi-plus")])],1),a("v-bottom-sheet",{attrs:{scrollable:""},model:{value:e.visible.overlay,callback:function(t){e.$set(e.visible,"overlay",t)},expression:"visible.overlay"}},[e.visible.overlay?a("gear-form",{attrs:{gear:e.gearToBeEdited},on:{close:function(t){e.visible.overlay=!1},input:e.inputGear}}):e._e()],1),a("v-snackbar",{attrs:{color:"success",rounded:"pill",timeout:"1500",top:""},model:{value:e.visible.completeMsg,callback:function(t){e.$set(e.visible,"completeMsg",t)},expression:"visible.completeMsg"}},[a("div",{staticClass:"text-center"},[e._v("A gear is updated")])])],1)},r=[],o=(a("4de4"),a("c975"),a("d81d"),a("5530")),n=a("d4ec"),s=a("bee2"),l=a("262e"),c=a("2caf"),d=a("9ab4"),u=a("60a3"),m=a("2f62"),v=a("3617"),b=a("0d59"),g=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.gearToBeEdited=void 0,e.visible={overlay:!1,completeMsg:!1},e.filter={type:void 0,sets:[],level:0,mode:0,main:!1,enhanceMode:b["b"].EnhanceModeFilter.ALL},e}return Object(s["a"])(a,[{key:"inputGear",value:function(e){this.updateGear(e),this.visible.completeMsg=!0,this.visible.overlay=!1}},{key:"editGear",value:function(e){this.gearToBeEdited=this.getGearMap.get(e),this.visible.overlay=!0}},{key:"createGear",value:function(){this.gearToBeEdited=void 0,this.visible.overlay=!0}},{key:"filteredGears",get:function(){var e=this,t=this.gears.filter((function(t){var a=void 0==e.filter.type||e.filter.type==t.type,i=0==e.filter.sets.length||e.filter.sets.indexOf(t.set)>=0,r=!e.filter.level||e.filter.level==t.level,o=!e.filter.enhanceMode||e.filter.enhanceMode==b["b"].EnhanceModeFilter.LESS_THAN_15&&t.enhance<15||e.filter.enhanceMode==b["b"].EnhanceModeFilter.ONLY_15&&15==t.enhance;return a&&i&&r&&o}));return this.filter.main||(t=t.map((function(e){var t=b["b"].Gear.clone(e);return u["e"].set(t,t.main.value,void 0),t}))),t}}]),a}(u["e"]);g=Object(d["a"])([Object(u["a"])({name:"gear-page",components:{GearDetail:v["a"],GearForm:v["b"],GearTable:v["e"],GearTableFilter:v["f"]},computed:Object(o["a"])(Object(o["a"])({},Object(m["d"])(["gears"])),Object(m["c"])(["getGearMap"])),methods:Object(o["a"])({},Object(m["b"])(["updateGear"]))})],g);var f=g,p=f,h=a("2877"),O=a("6544"),_=a.n(O),y=(a("a9e3"),a("d0cd"),a("169a")),k=y["a"].extend({name:"v-bottom-sheet",props:{inset:Boolean,maxWidth:{type:[String,Number],default:"auto"},transition:{type:String,default:"bottom-sheet-transition"}},computed:{classes:function(){return Object(o["a"])(Object(o["a"])({},y["a"].options.computed.classes.call(this)),{},{"v-bottom-sheet":!0,"v-bottom-sheet--inset":this.inset})}}}),w=a("8336"),x=a("62ad"),T=a("ce7e"),C=a("132d"),M=a("0fd9"),I=a("2db4"),R=Object(h["a"])(p,i,r,!1,null,null,null);t["default"]=R.exports;_()(R,{VBottomSheet:k,VBtn:w["a"],VCol:x["a"],VDivider:T["a"],VIcon:C["a"],VRow:M["a"],VSnackbar:I["a"]})},"4ead":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-alert",{attrs:{dense:"",outlined:"",type:"warning"}},[e._v(" This is still an experimental feature ")]),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-text",[a("gear-optimizer-filter",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("v-divider",{staticClass:"mb-4"}),a("gear-optimizer-criteria",{model:{value:e.criteria,callback:function(t){e.criteria=t},expression:"criteria"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.optimize}},[e._v("Optimize")]),a("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("Reset")])],1)],1)],1)],1),e.selectedCombination.id?a("v-row",[a("v-col",{attrs:{cols:"6",lg:"2",sm:"4"}},[a("gear-detail",{attrs:{gear:e.selectedCombination.weapon}})],1),a("v-col",{attrs:{cols:"6",lg:"2",sm:"4"}},[a("gear-detail",{attrs:{gear:e.selectedCombination.helmet}})],1),a("v-col",{attrs:{cols:"6",lg:"2",sm:"4"}},[a("gear-detail",{attrs:{gear:e.selectedCombination.armor}})],1),a("v-col",{attrs:{cols:"6",lg:"2",sm:"4"}},[a("gear-detail",{attrs:{gear:e.selectedCombination.necklace}})],1),a("v-col",{attrs:{cols:"6",lg:"2",sm:"4"}},[a("gear-detail",{attrs:{gear:e.selectedCombination.ring}})],1),a("v-col",{attrs:{cols:"6",lg:"2",sm:"4"}},[a("gear-detail",{attrs:{gear:e.selectedCombination.boot}})],1)],1):e._e(),a("v-row",[a("v-col",{attrs:{cols:"12"}},[e.progressPercent>0?a("v-progress-linear",{attrs:{height:"25",value:e.progressPercent}},[a("strong",[e._v(e._s(e.progressPercent)+"%")])]):e._e(),a("v-data-table",{attrs:{dense:"","footer-props":{showFirstLastPage:!0},headers:e.headers,items:e.combinations,"items-per-page":15,"multi-sort":!1,"single-select":""},on:{"click:row":e.clickRow}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"section"},[a("v-card-text",[a("strong",[e._v("Debug Panel")]),a("br"),e._l(e.gearStore.distribution,(function(t,i){return a("span",{key:i},[e._v(e._s(i)+" ("+e._s(t)+"), ")])})),a("br"),e._v(" Number of combinations: "+e._s(e._f("formatNumber")(e.gearStore.numOfCombinations))+" (Hard limit: "+e._s(e._f("formatNumber")(e.hardLimit))+")"),a("br"),e._v(" Estimated processing time: "+e._s(e._f("formatNumber")(Math.round(e.gearStore.numOfCombinations/1e7*7.1/60)))+" minutes ")],2)],1)],1)],1)],1)},r=[],o=a("f8d9"),n=o["a"],s=a("2877"),l=a("6544"),c=a.n(l),d=a("0798"),u=a("8336"),m=a("b0af"),v=a("99d9"),b=a("62ad"),g=a("8fea"),f=a("ce7e"),p=a("8e36"),h=a("0fd9"),O=Object(s["a"])(n,i,r,!1,null,null,null);t["default"]=O.exports;c()(O,{VAlert:d["a"],VBtn:u["a"],VCard:m["a"],VCardActions:v["a"],VCardText:v["b"],VCol:b["a"],VDataTable:g["a"],VDivider:f["a"],VProgressLinear:p["a"],VRow:h["a"]})},8131:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("d4ec"),r=a("bee2"),o=a("0d59"),n=function(){function e(){Object(i["a"])(this,e)}return Object(r["a"])(e,null,[{key:"optimize",value:function(t,a){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},r=0,n=Date.now(),s=[],l=new o["b"].GearCombinationBuilder,c=0;c<t.weapons.length;c++){l.weapon(t.weapons[c]);for(var d=0;d<t.helmets.length;d++){l.helmet(t.helmets[d]);for(var u=0;u<t.armors.length;u++){l.armor(t.armors[u]);for(var m=0;m<t.necklaces.length;m++){l.necklace(t.necklaces[m]);for(var v=0;v<t.rings.length;v++){l.ring(t.rings[v]);for(var b=0;b<t.boots.length;b++){l.boot(t.boots[b]);var g=l.build();if(++r%e.REPORT_PROGRESS_COUNT==0&&(console.log("optimize::count =",r,", result.length =",s.length),i(r),r>=e.COMBINATION_HARD_LIMIT))return console.log("optimize::hit combination hard limit"),console.log("processing time =",(Date.now()-n)/1e3,"seconds"),s;if(e.assert(g.ability.spd,a.spd)&&e.assert(g.ability.cri,a.cri)&&e.assert(g.ability.cdmg,a.cdmg)&&s.push(g),s.length>=e.OPTIMIZE_RESULT_HARD_LIMIT)return console.log("optimize::hit combination hard limit, result.length =",s.length),console.log("processing time =",(Date.now()-n)/1e3,"seconds"),s}}}}}}return console.log("processing time =",(Date.now()-n)/1e3,"seconds"),s}},{key:"assert",value:function(e,t){return!t.min&&!t.max||void 0!=e&&((!t.min||e>=t.min)&&(!t.max||e<=t.max))}}]),e}();n.COMBINATION_HARD_LIMIT=1e6,n.OPTIMIZE_RESULT_HARD_LIMIT=1e5,n.REPORT_PROGRESS_COUNT=n.COMBINATION_HARD_LIMIT/10},"91b0":function(e,t,a){e.exports=a.p+"js/0.dbd08e9c.worker.js"},d0cd:function(e,t,a){},f8d9:function(e,t,a){"use strict";(function(e){a("4de4"),a("a434");var i=a("5530"),r=(a("96cf"),a("1da1")),o=a("d4ec"),n=a("bee2"),s=a("262e"),l=a("2caf"),c=a("9ab4"),d=a("3617"),u=a("0d59"),m=a("8131"),v=a("843f"),b=a("60a3"),g=a("2f62"),f=function(t){Object(s["a"])(i,t);var a=Object(l["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=a.apply(this,arguments),t.worker=new Worker(e,void 0),t.filter=Object.assign({},u["a"].GEAR_FILTER_DEFAULT),t.criteria={spd:{min:0},cri:{min:0,max:110},cdmg:{min:0,max:210}},t.combinations=[],t.selectedCombination={id:""},t.progress=0,t.headers=[{text:"HP %",value:"ability.hpp"},{text:"HP",value:"ability.hp"},{text:"DEF %",value:"ability.defp"},{text:"DEF",value:"ability.def"},{text:"ATK %",value:"ability.atkp"},{text:"ATK",value:"ability.atk"},{text:"CRI",value:"ability.cri"},{text:"C.DMG",value:"ability.cdmg"},{text:"SPD",value:"ability.spd"},{text:"EFF",value:"ability.eff"},{text:"RES",value:"ability.res"}],t}return Object(n["a"])(i,[{key:"optimize",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("optimize::start"),this.combinations.splice(0,this.combinations.length),this.worker.postMessage({action:"optimize",store:this.gearStore,criteria:this.criteria});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.filter=Object.assign({},u["a"].GEAR_FILTER_DEFAULT)}},{key:"clickRow",value:function(e,t){console.log("clickRow::item =",e),console.log("clickRow::e =",t),t.select(),this.selectedCombination=e}},{key:"created",value:function(){var e=this;this.worker.onmessage=function(t){console.log("worker::onmessage::action =",t.data.action),"optimize-result"==t.data.action?e.combinations=t.data.result:"progress"==t.data.action&&(e.progress=t.data.result)}}},{key:"destroyed",value:function(){this.worker.terminate()}},{key:"gearStore",get:function(){return new u["b"].GearStore(v["a"].applyFilter(this.gears,this.filter))}},{key:"hardLimit",get:function(){return m["a"].COMBINATION_HARD_LIMIT}},{key:"progressPercent",get:function(){var e;return Math.ceil(this.progress/Math.min(m["a"].COMBINATION_HARD_LIMIT,null!==(e=this.gearStore.numOfCombinations)&&void 0!==e?e:1)*100)}}]),i}(b["e"]);f=Object(c["a"])([Object(b["a"])({name:"optimizer-page",components:{GearDetail:d["a"],GearOptimizerFilter:d["d"],GearOptimizerCriteria:d["c"]},computed:Object(i["a"])({},Object(g["d"])(["gears"]))})],f),t["a"]=f}).call(this,a("91b0"))}}]);
//# sourceMappingURL=gear.a4c32b10.js.map