(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["gear"],{"4d0a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"mx-auto"},[s("v-row",{attrs:{dense:"",justify:"center"}},[s("v-col",{attrs:{cols:"12",md:"auto"}},[s("gear-action-card",{attrs:{"selected-gear-id":e.selectedGearId},on:{"change-gears":e.changeGears,"change-sorting":e.changeSorting,click:e.actionClick,resize:e.onResize}})],1),s("v-col",{ref:"container",attrs:{cols:"12",md:"auto"}},[s("v-row",{attrs:{dense:"",justify:"center"}},[e.$vuetify.breakpoint.lgAndUp||"list"==e.mode?s("v-col",{attrs:{cols:"auto"}},[s("gear-list-view",{staticClass:"mx-auto",attrs:{gears:e.filteredGears,height:e.listViewHeight,"sort-col":e.sortingColumn},model:{value:e.selectedGearId,callback:function(t){e.selectedGearId=t},expression:"selectedGearId"}})],1):e._e(),e.$vuetify.breakpoint.lgAndUp||"statistics"==e.mode?s("v-col",{attrs:{cols:"auto"}},[s("gear-statistics-sheet",{attrs:{gears:e.filteredGears}})],1):e._e()],1)],1)],1),s("v-btn",{staticClass:"hidden-lg-and-up",attrs:{bottom:"",elevation:"12",fab:"",fixed:"",right:"",small:""},on:{click:e.toggleMode}},["list"==e.mode?s("v-icon",[e._v("mdi-chart-box-outline")]):s("v-icon",[e._v("mdi-view-list-outline")])],1)],1)},r=[],a=s("2909"),o=s("d4ec"),n=s("bee2"),c=s("262e"),l=s("2caf"),u=(s("a434"),s("99af"),s("9ab4")),d=s("60a3"),p=s("3617"),f=function(e){Object(c["a"])(s,e);var t=Object(l["a"])(s);function s(){var e;return Object(o["a"])(this,s),e=t.apply(this,arguments),e.selectedGearId="",e.sortingColumn="",e.filteredGears=[],e.listViewHeight=500,e.mode="list",e}return Object(n["a"])(s,[{key:"changeGears",value:function(e){var t;(t=this.filteredGears).splice.apply(t,[0,this.filteredGears.length].concat(Object(a["a"])(e)))}},{key:"changeSorting",value:function(e){this.sortingColumn=e}},{key:"toggleMode",value:function(){this.mode="list"==this.mode?"statistics":"list"}},{key:"actionClick",value:function(e,t){console.log(e,t)}},{key:"onResize",value:function(){var e=this;setTimeout((function(){var t=e.container.offsetTop;e.listViewHeight=window.innerHeight-t-64}),400)}}]),s}(d["f"]);Object(u["a"])([Object(d["e"])("container")],f.prototype,"container",void 0),f=Object(u["a"])([Object(d["a"])({name:"gear-page",components:{GearActionCard:p["a"],GearTable:p["h"],GearCard:p["b"],GearStatisticsSheet:p["g"],GearListView:p["c"]}})],f);var m=f,v=m,h=s("2877"),g=s("6544"),b=s.n(g),k=s("8336"),w=s("62ad"),y=s("132d"),S=s("0fd9"),C=s("269a"),_=s.n(C),x=s("dc22"),q=Object(h["a"])(v,i,r,!1,null,null,null);t["default"]=q.exports;b()(q,{VBtn:k["a"],VCol:w["a"],VIcon:y["a"],VRow:S["a"]}),_()(q,{Resize:x["a"]})},"4ead":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-sheet",{staticClass:"section body-2 py-1 pl-2 mb-2"},[s("strong",[e._v("Debug Panel")]),s("br"),e._l(e.gearStore.distribution,(function(t,i){return s("span",{key:i},[e._v(e._s(i)+" ("+e._s(t)+"), ")])})),e._v(" Number of combinations: "),s("strong",{staticClass:"body-1"},[e._v(e._s(e._f("formatNumber")(e.gearStore.numOfCombinations)))]),e._v(" / Estimated processing time: "),s("strong",{staticClass:"body-1"},[e._v(e._s(e._f("formatNumber")(Math.ceil(e.gearStore.numOfCombinations/1e7*8/60))))]),e._v(" minutes ")],2),s("optimization-profiler",{staticClass:"mb-2",on:{optimize:e.optimize},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),e.progress.processTime>=0?s("v-progress-linear",{staticClass:"mb-2",attrs:{color:"success",height:"70",indeterminate:e.optimizing,striped:""}},[s("strong",{staticClass:"text-center"},[e._v(" Processed ("+e._s(e._f("formatNumber")(e.progress.proceeded))+")"),s("br"),e._v(" Evaluated ("+e._s(e._f("formatNumber")(e.progress.evaluated))+")"),s("br"),e._v(" Found ("+e._s(e._f("formatNumber")(e.progress.found))+") in "+e._s(e.progress.processTime)+" seconds ")])]):e._e(),s("v-card",[s("v-card-text",{staticClass:"pa-2"},[s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"flex-grow-1",attrs:{cols:"12",lg:"12",sm:"auto"}},[s("suit-gear-view",{staticClass:"mx-auto",attrs:{hero:e.savedEquipped.hero,suit:e.savedEquipped.suit}})],1),s("v-col",{staticClass:"flex-grow-1",attrs:{cols:"12",lg:"12",sm:"auto"}},[e.currentEquipped?s("suit-gear-view",{staticClass:"mx-auto",attrs:{hero:e.currentEquipped.hero,suit:e.currentEquipped.suit}}):e._e()],1),s("v-col",{staticClass:"flex-grow-1",attrs:{cols:"12",lg:"12",sm:"auto"}},[s("suit-gear-view",{staticClass:"mx-auto",attrs:{hero:e.selectionEquipped.hero,suit:e.selectionEquipped.suit}})],1),s("v-col",{attrs:{cols:"12",sm:"4"}}),s("v-col",{attrs:{cols:"12",sm:"4"}}),s("v-col",{attrs:{cols:"12",sm:"4"}})],1)],1),s("v-divider"),s("v-card-actions",[s("v-btn",{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.equipAll}},[e._v("Equip Selected")]),s("v-btn",{attrs:{text:""},on:{click:e.unequipAll}},[e._v("Unequip Current")])],1)],1),s("v-card",{staticClass:"mt-2"},[s("v-card-text",[s("v-row",[s("v-col",[s("v-data-table",{attrs:{dense:"","footer-props":{showFirstLastPage:!0},headers:e.headers,"item-key":"id",items:e.result,"items-per-page":10,"multi-sort":!1,"single-select":""},on:{"click:row":e.clickRow},scopedSlots:e._u([{key:"item.sets",fn:function(t){var i=t.item;return[s("div",{staticClass:"d-flex"},e._l(i.sets,(function(e,t){return s("gear-set-icon",{key:t,attrs:{set:e}})})),1)]}}])})],1),s("v-col",{attrs:{cols:"auto"}})],1)],1)],1)],1)},r=[],a=s("f8d9"),o=a["a"],n=s("2877"),c=s("6544"),l=s.n(c),u=s("8336"),d=s("b0af"),p=s("99d9"),f=s("62ad"),m=s("8fea"),v=s("ce7e"),h=s("8e36"),g=s("0fd9"),b=s("8dd9"),k=Object(n["a"])(o,i,r,!1,null,null,null);t["default"]=k.exports;l()(k,{VBtn:u["a"],VCard:d["a"],VCardActions:p["a"],VCardText:p["b"],VCol:f["a"],VDataTable:m["a"],VDivider:v["a"],VProgressLinear:h["a"],VRow:g["a"],VSheet:b["a"]})},"91b0":function(e,t,s){e.exports=s.p+"js/0.f09a6607.worker.js"},f8d9:function(e,t,s){"use strict";(function(e){var i=s("5530"),r=s("1da1"),a=s("d4ec"),o=s("bee2"),n=s("262e"),c=s("2caf"),l=(s("96cf"),s("4de4"),s("159b"),s("9ab4")),u=s("d533"),d=s("3617"),p=s("60a3"),f=s("2f62"),m=s("08ba"),v=function(t){Object(n["a"])(i,t);var s=Object(c["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=s.apply(this,arguments),t.worker=new Worker(e,void 0),t.form={profile:m["a"].emptyOptimizationProfile(),hero:m["a"].emptyHero()},t.result=[],t.selectedSuit=m["a"].emptySuit(),t.optimizing=!1,t.progress={evaluated:0,proceeded:0,found:0,processTime:-1},t.headers=[{text:"Set",value:"sets",sortable:!1},{text:"HP",value:"hp"},{text:"DEF",value:"def"},{text:"ATK",value:"atk"},{text:"CRI",value:"cri"},{text:"C.DMG",value:"cdmg"},{text:"SPD",value:"spd"},{text:"EFF",value:"eff"},{text:"RES",value:"res"},{text:"Damage",value:"damage"},{text:"DMS",value:"dms"},{text:"EHP",value:"ehp"},{text:"Rate",value:"rating"}],t}return Object(o["a"])(i,[{key:"gearStore",get:function(){return m["e"].createGearStore(this.gears,this.form.profile.filter,{hero:this.form.hero,heros:this.heros})}},{key:"currentEquipped",get:function(){return this.getEquippedHero(this.form.hero.id)}},{key:"savedEquipped",get:function(){var e=this.getSavedSuit(this.form.hero.id);if(e)return m["b"].equip(this.form.hero,e)}},{key:"selectionEquipped",get:function(){return m["b"].equip(this.form.hero,this.selectedSuit)}},{key:"selectedSuitGears",get:function(){return[this.selectedSuit.weapon,this.selectedSuit.helmet,this.selectedSuit.armor,this.selectedSuit.necklace,this.selectedSuit.ring,this.selectedSuit.boot]}},{key:"optimize",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("optimize::start"),this.optimizing=!0,this.worker.postMessage({action:"optimize",store:this.gearStore,profile:this.form.profile,hero:this.form.hero});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clickRow",value:function(e,t){console.log("clickRow::item =",e),console.log("clickRow::e =",t),t.select(),this.selectedSuit=this.toSuit(e)}},{key:"toSuit",value:function(e){var t=this,s=new m["d"];return s.bonus(this.form.hero.bonusAbility),[e.weaponId,e.helmetId,e.armorId,e.necklaceId,e.ringId,e.bootId].forEach((function(e){void 0!=e&&s.setGear(t.getGear(e))})),s.build()}},{key:"equipAll",value:function(){var e=this;console.log("equipAll::hero.id =",this.form.profile.hero.id),this.unequipAll(),console.log("equipAll::selectedSuit =",this.selectedSuit),this.selectedSuitGears.forEach((function(t){void 0!=t&&(t.equippedHero=e.form.profile.hero.id,e.saveGears([t]))}))}},{key:"unequipAll",value:function(){var e=this;console.log("unequipAll::",this.currentEquipped),this.currentEquipped&&[this.currentEquipped.suit.weapon,this.currentEquipped.suit.helmet,this.currentEquipped.suit.armor,this.currentEquipped.suit.necklace,this.currentEquipped.suit.ring,this.currentEquipped.suit.boot].forEach((function(t){t&&(t.equippedHero="",e.saveGears([t]))}))}},{key:"created",value:function(){this.setupWorker()}},{key:"setupWorker",value:function(){var e=this;this.worker.onmessage=function(t){console.log("worker::onmessage::action =",t.data.action),"optimize-result"==t.data.action?(e.result=t.data.result,e.optimizing=!1):"progress"==t.data.action&&(console.log("worker::onmessage::result =",t.data.result),e.progress=t.data.result)}}},{key:"destroyed",value:function(){this.worker.terminate()}}]),i}(p["f"]);v=Object(l["a"])([Object(p["a"])({name:"optimizer-page",components:{GearCard:d["b"],GearSetIcon:d["d"],HeroDetailCard:d["i"],OptimizationProfiler:d["m"],TitleSheet:u["a"],SuitGearView:d["n"]},computed:Object(i["a"])({},Object(f["c"])(["heros","gears","getEquippedHero","getHero","getGear","getSavedSuit"])),methods:Object(f["b"])(["saveGears","updateState"])})],v),t["a"]=v}).call(this,s("91b0"))}}]);
//# sourceMappingURL=gear.48f1a9b2.js.map