(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["gear"],{"4d0a":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mx-auto",staticStyle:{"max-width":"720px"}},[i("v-row",{attrs:{dense:""}},[i("v-col",{attrs:{cols:"12",sm:"auto"}},[i("gear-filter-input-sheet",{attrs:{gears:e.filteredGears},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("gear-statistics-sheet",{staticClass:"mt-2",attrs:{gears:e.filteredGears}})],1),i("v-col",[i("v-sheet",{staticClass:"pa-1"},[i("v-btn",{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.createGear}},[e._v("Create")])],1),i("gear-list-view",{staticClass:"mt-2",attrs:{gears:e.filteredGears}}),i("v-btn",{staticClass:"hidden-sm-and-up",attrs:{bottom:"",fab:"",fixed:"",right:"",small:""},on:{click:e.goToTop}},[i("v-icon",[e._v("mdi-chevron-up")])],1)],1)],1),i("v-bottom-sheet",{attrs:{scrollable:""},model:{value:e.visible.overlay,callback:function(t){e.$set(e.visible,"overlay",t)},expression:"visible.overlay"}},[e.visible.overlay?i("gear-form-card",{attrs:{gear:e.gearToBeEdited},on:{close:function(t){e.visible.overlay=!1},input:e.inputGear}}):e._e()],1),i("v-snackbar",{attrs:{bottom:"",color:"success",outlined:"",timeout:"1500"},model:{value:e.visible.completeMsg,callback:function(t){e.$set(e.visible,"completeMsg",t)},expression:"visible.completeMsg"}},[i("div",{staticClass:"text-center"},[e._v("A gear is updated")])])],1)},o=[],s=(i("4de4"),i("c975"),i("5530")),a=i("d4ec"),l=i("bee2"),n=i("262e"),c=i("2caf"),d=i("9ab4"),u=i("60a3"),f=i("2f62"),p=i("3617"),h=i("0d59"),v=i("ce96"),g=function(e){Object(n["a"])(i,e);var t=Object(c["a"])(i);function i(){var e;return Object(a["a"])(this,i),e=t.apply(this,arguments),e.gearToBeEdited=void 0,e.visible={overlay:!1,completeMsg:!1},e.filter={type:void 0,sets:[],levelMode:h["c"].LevelFilterMode.ALL,enhanceMode:h["c"].EnhanceModeFilter.ALL,equippedMode:h["b"].ALL,applyToMain:!1,minStat:{},sortingColumn:"level",sortingOrder:v["b"].DESCENDING},e}return Object(l["a"])(i,[{key:"filteredGears",get:function(){var e=this,t=this.gears.filter((function(t){var i,r,o,s,a,l,n,c,d,u,f,p,v,g,m,b,S,k,y,O,C,_,w,j,x,M=void 0==e.filter.type||e.filter.type==t.type,G=0==e.filter.sets.length||e.filter.sets.indexOf(t.set)>=0,E=!e.filter.levelMode||e.filter.levelMode==h["c"].LevelFilterMode.LV85&&85==t.level||e.filter.levelMode==h["c"].LevelFilterMode.LV90&&90==t.level||e.filter.levelMode==h["c"].LevelFilterMode.OTHERS&&85!=t.level&&90!=t.level,P=!e.filter.enhanceMode||e.filter.enhanceMode==h["c"].EnhanceModeFilter.LESS_THAN_15&&t.enhance<15||e.filter.enhanceMode==h["c"].EnhanceModeFilter.ONLY_15&&15==t.enhance,q=!e.filter.equippedMode||e.filter.equippedMode==h["b"].YES&&""!=t.equippedHero||e.filter.equippedMode==h["b"].NO&&""==t.equippedHero,A=(null!==(i=t.hpp)&&void 0!==i?i:0)>=(null!==(r=e.filter.minStat.hpp)&&void 0!==r?r:0)&&(null!==(o=t.hp)&&void 0!==o?o:0)>=(null!==(s=e.filter.minStat.hp)&&void 0!==s?s:0)&&(null!==(a=t.defp)&&void 0!==a?a:0)>=(null!==(l=e.filter.minStat.defp)&&void 0!==l?l:0)&&(null!==(n=t.def)&&void 0!==n?n:0)>=(null!==(c=e.filter.minStat.def)&&void 0!==c?c:0)&&(null!==(d=t.atkp)&&void 0!==d?d:0)>=(null!==(u=e.filter.minStat.atkp)&&void 0!==u?u:0)&&(null!==(f=t.atk)&&void 0!==f?f:0)>=(null!==(p=e.filter.minStat.atk)&&void 0!==p?p:0)&&(null!==(v=t.cri)&&void 0!==v?v:0)>=(null!==(g=e.filter.minStat.cri)&&void 0!==g?g:0)&&(null!==(m=t.cdmg)&&void 0!==m?m:0)>=(null!==(b=e.filter.minStat.cdmg)&&void 0!==b?b:0)&&(null!==(S=t.spd)&&void 0!==S?S:0)>=(null!==(k=e.filter.minStat.spd)&&void 0!==k?k:0)&&(null!==(y=t.eff)&&void 0!==y?y:0)>=(null!==(O=e.filter.minStat.eff)&&void 0!==O?O:0)&&(null!==(C=t.res)&&void 0!==C?C:0)>=(null!==(_=e.filter.minStat.res)&&void 0!==_?_:0)&&t.score>=(null!==(w=e.filter.minStat.score)&&void 0!==w?w:0)&&t.offScore>=(null!==(j=e.filter.minStat.offScore)&&void 0!==j?j:0)&&t.defScore>=(null!==(x=e.filter.minStat.defScore)&&void 0!==x?x:0);return M&&G&&E&&P&&q&&A}));if(this.filter.sortingColumn){var i=function(e,t){var i=t.level-e.level;return 0==i?t.enhance-e.enhance:i};t.sort((function(t,r){var o=void 0,s=void 0;return(e.filter.applyToMain||t.main.value!=e.filter.sortingColumn)&&(o=t[e.filter.sortingColumn]),(e.filter.applyToMain||r.main.value!=e.filter.sortingColumn)&&(s=r[e.filter.sortingColumn]),o||s?o?s?o-s==0?i(t,r):e.filter.sortingOrder==v["b"].DESCENDING?s-o:o-s:e.filter.sortingOrder==v["b"].DESCENDING?-1:1:e.filter.sortingOrder==v["b"].DESCENDING?1:-1:i(t,r)}))}return t}},{key:"inputGear",value:function(e){this.saveGears([e]),this.visible.completeMsg=!0,this.visible.overlay=!1}},{key:"editGear",value:function(e){this.gearToBeEdited=this.getGear(e),this.visible.overlay=!0}},{key:"createGear",value:function(){this.gearToBeEdited=void 0,this.visible.overlay=!0}},{key:"goToTop",value:function(){console.log("called"),window.scrollTo({top:0,left:0,behavior:"smooth"})}}]),i}(u["e"]);g=Object(d["a"])([Object(u["a"])({name:"gear-page",components:{GearFormCard:p["d"],GearTable:p["j"],GearFilterInputSheet:p["c"],GearCard:p["a"],GearDetailCard:p["b"],GearStatisticsSheet:p["i"],GearListView:p["e"],GearListViewDisplayConfigSheet:p["f"]},computed:Object(s["a"])({},Object(f["c"])(["gears","getGear"])),methods:Object(f["b"])(["saveGears"])})],g);var m=g,b=m,S=i("2877"),k=i("6544"),y=i.n(k),O=(i("a9e3"),i("d0cd"),i("169a")),C=O["a"].extend({name:"v-bottom-sheet",props:{inset:Boolean,maxWidth:{type:[String,Number],default:"auto"},transition:{type:String,default:"bottom-sheet-transition"}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({},O["a"].options.computed.classes.call(this)),{},{"v-bottom-sheet":!0,"v-bottom-sheet--inset":this.inset})}}}),_=i("8336"),w=i("62ad"),j=i("132d"),x=i("0fd9"),M=i("8dd9"),G=i("2db4"),E=Object(S["a"])(b,r,o,!1,null,null,null);t["default"]=E.exports;y()(E,{VBottomSheet:C,VBtn:_["a"],VCol:w["a"],VIcon:j["a"],VRow:x["a"],VSheet:M["a"],VSnackbar:G["a"]})},"4ead":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-sheet",{staticClass:"section body-2 py-1 pl-2",attrs:{rounded:""}},[i("strong",[e._v("Debug Panel")]),i("br"),e._l(e.gearStore.distribution,(function(t,r){return i("span",{key:r},[e._v(e._s(r)+" ("+e._s(t)+"), ")])})),e._v(" Number of combinations: "),i("strong",{staticClass:"body-1"},[e._v(e._s(e._f("formatNumber")(e.gearStore.numOfCombinations)))]),e._v(" / Estimated processing time: "),i("strong",{staticClass:"body-1"},[e._v(e._s(e._f("formatNumber")(Math.ceil(e.gearStore.numOfCombinations/1e7*8/60))))]),e._v(" minutes ")],2),i("v-card",{staticClass:"mt-2"},[i("optimization-profiler",{on:{"change-hero":e.changeHero},model:{value:e.profile,callback:function(t){e.profile=t},expression:"profile"}}),i("v-divider"),e.progress.processTime>=0?i("v-progress-linear",{attrs:{height:"25",indeterminate:e.optimizing,striped:""}},[i("strong",[e._v(" Processed ("+e._s(e._f("formatNumber")(e.progress.proceeded))+") / Evaluated ("+e._s(e._f("formatNumber")(e.progress.evaluated))+") / Found ("+e._s(e._f("formatNumber")(e.progress.found))+") in "+e._s(e.progress.processTime)+" seconds ")])]):e._e(),i("v-card-actions",[i("v-btn",{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.optimize}},[e._v("Optimize")]),i("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("Clear")]),i("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),i("v-btn",{staticClass:"font-weight-bold",attrs:{color:"success",text:""},on:{click:e.saveProfile}},[e._v("Save")]),i("v-btn",{attrs:{text:""},on:{click:e.loadProfile}},[e._v("Load")]),i("v-divider",{staticClass:"mx-2",attrs:{vertical:""}})],1)],1),i("v-card",{staticClass:"mt-2 pa-2"},[i("v-row",{attrs:{dense:""}},[i("v-col",{attrs:{cols:"12",lg:"auto"}},[i("hero-detail-card",{attrs:{"hero-id":e.profile.hero.id,rating:e.profile.filter.rating.point,suit:e.selectedSuit}})],1),i("v-col",{attrs:{cols:"6",lg:"auto"}},[i("gear-detail-card",{attrs:{gear:e.selectedSuit.weapon,"ref-hero-id":e.profile.hero.id}})],1),i("v-col",{attrs:{cols:"6",lg:"auto"}},[i("gear-detail-card",{attrs:{gear:e.selectedSuit.helmet,"ref-hero-id":e.profile.hero.id}})],1),i("v-col",{attrs:{cols:"6",lg:"auto"}},[i("gear-detail-card",{attrs:{gear:e.selectedSuit.armor,"ref-hero-id":e.profile.hero.id}})],1),i("v-col",{attrs:{cols:"6",lg:"auto"}},[i("gear-detail-card",{attrs:{gear:e.selectedSuit.necklace,"ref-hero-id":e.profile.hero.id}})],1),i("v-col",{attrs:{cols:"6",lg:"auto"}},[i("gear-detail-card",{attrs:{gear:e.selectedSuit.ring,"ref-hero-id":e.profile.hero.id}})],1),i("v-col",{attrs:{cols:"6",lg:"auto"}},[i("gear-detail-card",{attrs:{gear:e.selectedSuit.boot,"ref-hero-id":e.profile.hero.id}})],1)],1),i("v-divider",{staticClass:"mt-2"}),i("v-card-actions",[i("v-btn",{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.equipAll}},[e._v("Equip All")]),i("v-btn",{attrs:{text:""},on:{click:e.unequipAll}},[e._v("Unequip All")])],1)],1),i("v-card",{staticClass:"mt-2"},[i("v-card-text",[i("v-row",[i("v-col",[i("v-data-table",{attrs:{dense:"","footer-props":{showFirstLastPage:!0},headers:e.headers,"item-key":"id",items:e.result,"items-per-page":10,"multi-sort":!1,"single-select":""},on:{"click:row":e.clickRow},scopedSlots:e._u([{key:"item.sets",fn:function(t){var r=t.item;return[i("div",{staticClass:"d-flex"},e._l(r.sets,(function(e,t){return i("gear-set-icon",{key:t,attrs:{set:e}})})),1)]}}])})],1),i("v-col",{attrs:{cols:"auto"}})],1)],1)],1),e.popupMsg?i("v-snackbar",{attrs:{bottom:"",color:"success",outlined:"",timeout:"1500"},model:{value:e.popupMsg,callback:function(t){e.popupMsg=t},expression:"popupMsg"}},[1==e.popupMsg?i("div",{staticClass:"text-center"},[e._v("Profile saved")]):e._e()]):e._e()],1)},o=[],s=i("f8d9"),a=s["a"],l=i("2877"),n=i("6544"),c=i.n(n),d=i("8336"),u=i("b0af"),f=i("99d9"),p=i("62ad"),h=i("8fea"),v=i("ce7e"),g=i("8e36"),m=i("0fd9"),b=i("8dd9"),S=i("2db4"),k=Object(l["a"])(a,r,o,!1,null,null,null);t["default"]=k.exports;c()(k,{VBtn:d["a"],VCard:u["a"],VCardActions:f["a"],VCardText:f["b"],VCol:p["a"],VDataTable:h["a"],VDivider:v["a"],VProgressLinear:g["a"],VRow:m["a"],VSheet:b["a"],VSnackbar:S["a"]})},"91b0":function(e,t,i){e.exports=i.p+"js/0.270cacc2.worker.js"},d0cd:function(e,t,i){},f8d9:function(e,t,i){"use strict";(function(e){i("4de4"),i("4160"),i("a434"),i("159b");var r=i("5530"),o=i("2909"),s=(i("96cf"),i("1da1")),a=i("d4ec"),l=i("bee2"),n=i("262e"),c=i("2caf"),d=i("9ab4"),u=i("3617"),f=i("0d59"),p=i("60a3"),h=i("2f62"),v=i("08ba"),g=i("79f0"),m=function(t){Object(n["a"])(r,t);var i=Object(c["a"])(r);function r(){var t;return Object(a["a"])(this,r),t=i.apply(this,arguments),t.worker=new Worker(e,void 0),t.profile={id:"",hero:{id:"",bonusAbility:{}},filter:{sets:[],necklaces:[],rings:[],boots:[],enhanceMode:f["c"].EnhanceModeFilter.ONLY_15,locked:!1,equipped:!1,score:0,rating:{point:{hp:1,def:1,atk:1,cri:1,cdmg:1,spd:1,eff:1,res:1},threshold:100,minSize:20}},stat:{hp:{},def:{},atk:{},cri:{},cdmg:{},spd:{},eff:{},res:{},ehp:{},damage:{}},evaluation:{forcedSets:[],limit:1e7,brokenSet:!1,lv85:!1}},t.result=[],t.selectedSuit={},t.optimizing=!1,t.progress={evaluated:0,proceeded:0,found:0,processTime:-1},t.popupMsg=0,t.headers=[{text:"Set",value:"sets",sortable:!1},{text:"HP",value:"hp"},{text:"DEF",value:"def"},{text:"ATK",value:"atk"},{text:"CRI",value:"cri"},{text:"C.DMG",value:"cdmg"},{text:"SPD",value:"spd"},{text:"EFF",value:"eff"},{text:"RES",value:"res"},{text:"Damage",value:"damage"},{text:"DMS",value:"dms"},{text:"EHP",value:"ehp"},{text:"Rate",value:"rating"}],t}return Object(l["a"])(r,[{key:"gearStore",get:function(){return v["b"].createGearStore(this.gears,this.profile.filter,{heroId:this.profile.hero.id,heroAbility:this.getHero(this.profile.hero.id)})}},{key:"equippedHero",get:function(){if(this.profile.hero.id&&this.selectedSuit)return console.log(this.selectedSuit),console.log("equippedHero = ",this.profile.hero.id),v["e"].equip(this.getHero(this.profile.hero.id),this.selectedSuit)}},{key:"optimize",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("optimize::start"),this.result.splice(0,this.result.length),this.optimizing=!0,this.worker.postMessage({action:"optimize",store:this.gearStore,profile:this.profile,hero:this.getHero(this.profile.hero.id)});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clickRow",value:function(e,t){console.log("clickRow::item =",e),console.log("clickRow::e =",t),t.select(),this.selectedSuit=this.toSuit(e)}},{key:"toSuit",value:function(e){var t=this,i=new v["a"];return i.bonus(this.profile.hero.bonusAbility),[e.weaponId,e.helmetId,e.armorId,e.necklaceId,e.ringId,e.bootId].forEach((function(e){void 0!=e&&i.setGear(t.getGear(e))})),i.build()}},{key:"reset",value:function(){console.log("reset"),this.result.splice(0,this.result.length),this.assignProfile(g["a"]),this.selectedSuit=this.getSuit(this.profile.hero.id,this.profile.hero.bonusAbility)}},{key:"changeHero",value:function(e){this.updateState({lastSelectedHeroId:e}),this.reset(),console.log("changeHero::heroId =",e),this.profile.hero.id=e,this.loadProfile()}},{key:"equipAll",value:function(){var e=this;console.log("equipAll::hero.id =",this.profile.hero.id);var t=this.getSuit(this.profile.hero.id);if([t.weapon,t.helmet,t.armor,t.necklace,t.ring,t.boot].forEach((function(t){void 0!=t&&(t.equippedHero="",e.saveGears([t]))})),this.selectedSuit){this.unequipAll(),console.log("equipAll::selectedSuit =",this.selectedSuit);var i=this.selectedSuit;[i.weapon,i.helmet,i.armor,i.necklace,i.ring,i.boot].forEach((function(t){void 0!=t&&(t.equippedHero=e.profile.hero.id,e.saveGears([t]))}))}}},{key:"unequipAll",value:function(){var e=this;this.selectedSuit&&(console.log("unequipAll::",this.selectedSuit),[this.selectedSuit.weapon,this.selectedSuit.helmet,this.selectedSuit.armor,this.selectedSuit.necklace,this.selectedSuit.ring,this.selectedSuit.boot].forEach((function(t){void 0!=t&&(t.equippedHero="",e.saveGears([t]))})))}},{key:"saveProfile",value:function(){console.log("saveProfile::profile.id = ".concat(this.profile.hero.id,", profile ="),this.profile),this.updateProfiles([this.profile]),this.popupMsg=1}},{key:"loadProfile",value:function(){console.log("loadProfile::hero.id =",this.profile.hero.id);var e=this.getProfile(this.profile.hero.id);console.log("loadProfile::profile =",e),e?this.assignProfile(e):(console.log("loadProfile::no saved profile"),this.profile.id=this.profile.hero.id),this.selectedSuit=this.getSuit(this.profile.hero.id,this.profile.hero.bonusAbility)}},{key:"assignProfile",value:function(e){console.log("assignProfile::profile =",e),this.profile.id=e.id,this.profile.hero.bonusAbility=Object.assign({},e.hero.bonusAbility),this.profile.filter.sets=Object(o["a"])(e.filter.sets),this.profile.filter.necklaces=Object(o["a"])(e.filter.necklaces),this.profile.filter.rings=Object(o["a"])(e.filter.rings),this.profile.filter.boots=Object(o["a"])(e.filter.boots),this.profile.filter.enhanceMode=e.filter.enhanceMode,this.profile.filter.locked=e.filter.locked,this.profile.filter.equipped=e.filter.equipped,this.profile.filter.score=e.filter.score,this.profile.filter.rating.threshold=e.filter.rating.threshold,this.profile.filter.rating.minSize=e.filter.rating.minSize,this.profile.filter.rating.point=Object.assign({},e.filter.rating.point),this.profile.stat.hp=Object.assign({},e.stat.hp),this.profile.stat.def=Object.assign({},e.stat.def),this.profile.stat.atk=Object.assign({},e.stat.atk),this.profile.stat.cri=Object.assign({},e.stat.cri),this.profile.stat.cdmg=Object.assign({},e.stat.cdmg),this.profile.stat.spd=Object.assign({},e.stat.spd),this.profile.stat.eff=Object.assign({},e.stat.eff),this.profile.stat.res=Object.assign({},e.stat.res),this.profile.stat.ehp=Object.assign({},e.stat.ehp),this.profile.stat.damage=Object.assign({},e.stat.damage),this.profile.evaluation=Object.assign({},e.evaluation)}},{key:"created",value:function(){this.setupWorker(),this.reset(),this.profile.hero.id=this.siteState.lastSelectedHeroId,this.loadProfile()}},{key:"setupWorker",value:function(){var e=this;this.worker.onmessage=function(t){console.log("worker::onmessage::action =",t.data.action),"optimize-result"==t.data.action?(e.result=t.data.result,e.optimizing=!1):"progress"==t.data.action&&(console.log("worker::onmessage::result =",t.data.result),e.progress=t.data.result)}}},{key:"destroyed",value:function(){this.worker.terminate()}}]),r}(p["e"]);m=Object(d["a"])([Object(p["a"])({name:"optimizer-page",components:{GearDetailCard:u["b"],GearSetIcon:u["g"],HeroDetailCard:u["k"],OptimizationProfiler:u["m"]},computed:Object(r["a"])({},Object(h["c"])(["siteState","heros","gears","getSuit","getProfile","getHero","getGear"])),methods:Object(h["b"])(["saveGears","updateProfiles","updateState"])})],m),t["a"]=m}).call(this,i("91b0"))}}]);
//# sourceMappingURL=gear.83c8586c.js.map