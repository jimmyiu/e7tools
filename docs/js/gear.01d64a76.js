(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["gear"],{"4d0a":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",[i("gear-table-filter",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("v-divider",{staticClass:"mt-1"}),i("gear-table",{attrs:{gears:e.filteredGears},on:{"edit-gear":e.editGear}})],1)],1),i("v-btn",{attrs:{bottom:"",fab:"",fixed:"",right:""},on:{click:e.createGear}},[i("v-icon",[e._v("mdi-plus")])],1),i("v-bottom-sheet",{attrs:{scrollable:""},model:{value:e.visible.overlay,callback:function(t){e.$set(e.visible,"overlay",t)},expression:"visible.overlay"}},[e.visible.overlay?i("gear-form-card",{attrs:{gear:e.gearToBeEdited},on:{close:function(t){e.visible.overlay=!1},input:e.inputGear}}):e._e()],1),i("v-snackbar",{attrs:{color:"success",rounded:"pill",timeout:"1500",top:""},model:{value:e.visible.completeMsg,callback:function(t){e.$set(e.visible,"completeMsg",t)},expression:"visible.completeMsg"}},[i("div",{staticClass:"text-center"},[e._v("A gear is updated")])])],1)},a=[],o=(i("4de4"),i("c975"),i("d81d"),i("5530")),s=i("d4ec"),n=i("bee2"),l=i("262e"),c=i("2caf"),u=i("9ab4"),d=i("60a3"),p=i("2f62"),h=i("3617"),f=i("0d59"),v=function(e){Object(l["a"])(i,e);var t=Object(c["a"])(i);function i(){var e;return Object(s["a"])(this,i),e=t.apply(this,arguments),e.gearToBeEdited=void 0,e.visible={overlay:!1,completeMsg:!1},e.filter={type:void 0,sets:[],level:0,mode:0,main:!1,enhanceMode:f["b"].EnhanceModeFilter.ALL},e}return Object(n["a"])(i,[{key:"inputGear",value:function(e){this.updateGear(e),this.visible.completeMsg=!0,this.visible.overlay=!1}},{key:"editGear",value:function(e){this.gearToBeEdited=this.getGearMap.get(e),this.visible.overlay=!0}},{key:"createGear",value:function(){this.gearToBeEdited=void 0,this.visible.overlay=!0}},{key:"filteredGears",get:function(){var e=this,t=this.gears.filter((function(t){var i=void 0==e.filter.type||e.filter.type==t.type,r=0==e.filter.sets.length||e.filter.sets.indexOf(t.set)>=0,a=!e.filter.level||e.filter.level==t.level,o=!e.filter.enhanceMode||e.filter.enhanceMode==f["b"].EnhanceModeFilter.LESS_THAN_15&&t.enhance<15||e.filter.enhanceMode==f["b"].EnhanceModeFilter.ONLY_15&&15==t.enhance;return i&&r&&a&&o}));return this.filter.main||(t=t.map((function(e){var t=f["b"].Gear.clone(e);return d["e"].set(t,t.main.value,void 0),t}))),t}}]),i}(d["e"]);v=Object(u["a"])([Object(d["a"])({name:"gear-page",components:{GearFormCard:h["b"],GearTable:h["d"],GearTableFilter:h["e"]},computed:Object(o["a"])(Object(o["a"])({},Object(p["d"])(["gears"])),Object(p["c"])(["getGearMap"])),methods:Object(p["b"])(["updateGear"])})],v);var m=v,b=m,g=i("2877"),k=i("6544"),_=i.n(k),x=(i("a9e3"),i("d0cd"),i("169a")),y=x["a"].extend({name:"v-bottom-sheet",props:{inset:Boolean,maxWidth:{type:[String,Number],default:"auto"},transition:{type:String,default:"bottom-sheet-transition"}},computed:{classes:function(){return Object(o["a"])(Object(o["a"])({},x["a"].options.computed.classes.call(this)),{},{"v-bottom-sheet":!0,"v-bottom-sheet--inset":this.inset})}}}),S=i("8336"),O=i("62ad"),C=i("ce7e"),w=i("132d"),F=i("0fd9"),M=i("2db4"),E=Object(g["a"])(b,r,a,!1,null,null,null);t["default"]=E.exports;_()(E,{VBottomSheet:y,VBtn:S["a"],VCol:O["a"],VDivider:C["a"],VIcon:w["a"],VRow:F["a"],VSnackbar:M["a"]})},"4ead":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{staticClass:"section"},[r("v-card-text",[r("strong",[e._v("Debug Panel")]),r("br"),e._l(e.gearStore.distribution,(function(t,i){return r("span",{key:i},[e._v(e._s(i)+" ("+e._s(t)+"), ")])})),r("br"),e._v(" Number of combinations: "+e._s(e._f("formatNumber")(e.gearStore.numOfCombinations))+" (Hard limit: "+e._s(e._f("formatNumber")(e.hardLimit))+")"),r("br"),e._v(" Estimated processing time: "+e._s(e._f("formatNumber")(Math.round(e.gearStore.numOfCombinations/1e7*8/60)))+" minutes ")],2)],1),r("v-card",{staticClass:"mt-2"},[r("v-card-text",[r("optimization-profiler",{on:{"change-hero":e.reset},model:{value:e.profile,callback:function(t){e.profile=t},expression:"profile"}})],1),r("v-divider"),r("v-card-actions",[r("v-btn",{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.optimize}},[e._v("Optimize")]),r("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("Reset")]),r("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),r("v-btn",{staticClass:"font-weight-bold",attrs:{color:"success",text:""},on:{click:e.saveProfile}},[e._v("Save")]),r("v-btn",{attrs:{text:""},on:{click:e.loadProfile}},[e._v("Load")]),r("v-divider",{staticClass:"mx-2",attrs:{vertical:""}})],1)],1),r("v-card",{staticClass:"mt-2"},[r("v-card-text",[e.equippedHero?r("v-row",[r("v-col",{staticClass:"d-flex",attrs:{cols:"12"}},[r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("0003")}}),e._v(" "+e._s(e.equippedHero.hp)+" "),r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("b22f")}}),e._v(" "+e._s(e.equippedHero.def)+" "),r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("2ff1")}}),e._v(" "+e._s(e.equippedHero.atk)+" "),r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("7a34")}}),e._v(" "+e._s(e.equippedHero.cri)+" "),r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("e726")}}),e._v(" "+e._s(e.equippedHero.cdmg)+" "),r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("befc")}}),e._v(" "+e._s(e.equippedHero.spd)+" "),r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("40f6")}}),e._v(" "+e._s(e.equippedHero.eff)+" "),r("v-img",{attrs:{"max-height":"18","max-width":"18",src:i("85de")}}),e._v(" "+e._s(e.equippedHero.res)+" Damage: "+e._s(e.equippedHero.damage)+", EHP: "+e._s(e.equippedHero.ehp)+" ")],1)],1):e._e(),r("v-row",[r("v-col",{attrs:{cols:"6",lg:"2",sm:"2"}},[r("gear-detail-card",{attrs:{gear:e.selectedCombination.weapon}})],1),r("v-col",{attrs:{cols:"6",lg:"2",sm:"2"}},[r("gear-detail-card",{attrs:{gear:e.selectedCombination.helmet}})],1),r("v-col",{attrs:{cols:"6",lg:"2",sm:"2"}},[r("gear-detail-card",{attrs:{gear:e.selectedCombination.armor}})],1),r("v-col",{attrs:{cols:"6",lg:"2",sm:"2"}},[r("gear-detail-card",{attrs:{gear:e.selectedCombination.necklace}})],1),r("v-col",{attrs:{cols:"6",lg:"2",sm:"2"}},[r("gear-detail-card",{attrs:{gear:e.selectedCombination.ring}})],1),r("v-col",{attrs:{cols:"6",lg:"2",sm:"2"}},[r("gear-detail-card",{attrs:{gear:e.selectedCombination.boot}})],1)],1)],1),r("v-divider"),r("v-card-actions",[r("v-btn",{staticClass:"font-weight-bold",attrs:{color:"primary",text:""},on:{click:e.equipAll}},[e._v("Equip All")]),r("v-btn",{attrs:{text:""},on:{click:e.unequipAll}},[e._v("Unequip All")])],1)],1),r("v-card",{staticClass:"mt-2"},[e.progress>0?r("v-progress-linear",{attrs:{height:"20",indeterminate:"",striped:""}},[r("strong",[e._v(e._s(e.progress)+"%")])]):e._e(),r("v-card-text",[r("v-row",[r("v-col",[r("v-data-table",{attrs:{dense:"","footer-props":{showFirstLastPage:!0},headers:e.headers,"item-key":"combination.id",items:e.result,"items-per-page":10,"multi-sort":!1,"single-select":""},on:{"click:row":e.clickRow},scopedSlots:e._u([{key:"item.combination.sets",fn:function(t){var i=t.item;return[r("div",{staticClass:"d-flex"},e._l(i.combination.sets,(function(e,t){return r("gear-set-icon",{key:t,attrs:{set:e,small:""}})})),1)]}}])})],1),r("v-col",{attrs:{cols:"auto"}})],1)],1)],1),e.profile.hero?r("v-snackbar",{attrs:{color:"success",rounded:"pill",timeout:"1500",top:""},model:{value:e.popupMsg,callback:function(t){e.popupMsg=t},expression:"popupMsg"}},[r("div",{staticClass:"text-center"},[e._v(e._s(e.profile.hero.name)+" profile saved")])]):e._e()],1)},a=[],o=i("f8d9"),s=o["a"],n=i("2877"),l=i("6544"),c=i.n(l),u=i("8336"),d=i("b0af"),p=i("99d9"),h=i("62ad"),f=i("8fea"),v=i("ce7e"),m=i("adda"),b=i("8e36"),g=i("0fd9"),k=i("2db4"),_=Object(n["a"])(s,r,a,!1,null,null,null);t["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardActions:p["a"],VCardText:p["b"],VCol:h["a"],VDataTable:f["a"],VDivider:v["a"],VImg:m["a"],VProgressLinear:b["a"],VRow:g["a"],VSnackbar:k["a"]})},5549:function(e,t,i){"use strict";i("b65f");var r=i("d4ec"),a=i("bee2"),o=i("0d59"),s=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,[{key:"apply",value:function(e,t){var i=this.determineSetsExtraAbility(e.sets),r={hp:Math.trunc(t.hp*(1+(e.ability.hpp+i.hpp)/100))+e.ability.hp,def:Math.trunc(t.def*(1+(e.ability.defp+i.defp)/100))+e.ability.def,atk:Math.trunc(t.atk*(1+(e.ability.atkp+i.atkp)/100))+e.ability.atk,cri:t.cri+e.ability.cri+i.cri,cdmg:t.cdmg+e.ability.cdmg+i.cdmg,spd:Math.trunc(t.spd*(1+i.spdp/100))+e.ability.spd,eff:t.eff+e.ability.eff+i.eff,res:t.res+e.ability.res+i.res,combination:e,damage:0,ehp:0};return r.damage=Math.trunc(r.atk*Math.min(r.cdmg,350)/1e3),r.ehp=Math.trunc(r.hp*(1+r.def/300)),r}},{key:"determineSetsExtraAbility",value:function(e){for(var t={hpp:0,defp:0,atkp:0,cri:0,cdmg:0,spdp:0,eff:0,res:0},i=0;i<e.length;i++)e[i]==o["b"].Set.Health?t.hpp+=12:e[i]==o["b"].Set.Defense?t.defp+=12:e[i]==o["b"].Set.Attack?t.atkp+=35:e[i]==o["b"].Set.Critical?t.cri+=12:e[i]==o["b"].Set.Destruction?t.cdmg+=40:e[i]==o["b"].Set.Speed?t.spdp+=25:e[i]==o["b"].Set.Hit?t.eff+=12:e[i]==o["b"].Set.Resist&&(t.res+=12);return t}}]),e}();t["a"]=new s},8131:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("d4ec"),a=i("bee2"),o=i("0d59"),s=i("5549"),n=function(){function e(t,i,a){Object(r["a"])(this,e),this.store=t,this.profile=i,this.progressCallback=a}return Object(a["a"])(e,[{key:"optimize",value:function(){console.log("optimize::start"),console.log("optimize::profile =",this.profile);var e=Date.now();this.progressCallback(1);var t=this.performOptimize();return this.progressCallback(0),console.log("optimize::processing time =",(Date.now()-e)/1e3,"seconds"),t}},{key:"minFilter",value:function(e){var t=this;return this.profile.stat[e].min?function(i){return i[e]>=t.profile.stat[e].min}:function(e){return!0}}},{key:"maxFilter",value:function(e){var t=this;return this.profile.stat[e].max?function(i){return i[e]<=t.profile.stat[e].max}:function(e){return!0}}},{key:"combinationFilter",value:function(){var e,t;if(0==this.profile.combination.forcedSets.length)return function(e,t){return!0};for(var i={},r=0;r<this.profile.combination.forcedSets.length;r++){var a=this.profile.combination.forcedSets[r];switch(a){case o["b"].Set.Speed:case o["b"].Set.Attack:case o["b"].Set.Destruction:i[a]=null!==(e=i[a])&&void 0!==e?e:4;break;default:i[a]=(null!==(t=i[a])&&void 0!==t?t:0)+2;break}}return function(e,t){return e._sets.isPossible(i,t)}}},{key:"equipedHeroFilter",value:function(){var e=this.minFilter(o["b"].Stat.HP.value),t=this.maxFilter(o["b"].Stat.HP.value),i=this.minFilter(o["b"].Stat.DEF.value),r=this.maxFilter(o["b"].Stat.DEF.value),a=this.minFilter(o["b"].Stat.ATK.value),s=this.maxFilter(o["b"].Stat.ATK.value),n=this.minFilter(o["b"].Stat.CRI.value),l=this.maxFilter(o["b"].Stat.CRI.value),c=this.minFilter(o["b"].Stat.CDMG.value),u=this.maxFilter(o["b"].Stat.CDMG.value),d=this.minFilter(o["b"].Stat.SPD.value),p=this.maxFilter(o["b"].Stat.SPD.value),h=this.minFilter(o["b"].Stat.EFF.value),f=this.maxFilter(o["b"].Stat.EFF.value),v=this.minFilter(o["b"].Stat.RES.value),m=this.maxFilter(o["b"].Stat.RES.value),b=this.minFilter("ehp"),g=this.minFilter("damage");return function(o){return d(o)&&p(o)&&n(o)&&l(o)&&e(o)&&t(o)&&i(o)&&r(o)&&a(o)&&s(o)&&c(o)&&u(o)&&h(o)&&f(o)&&v(o)&&m(o)&&b(o)&&g(o)}}},{key:"performOptimize",value:function(){for(var t=0,i=0,r=[],a=new o["b"].GearCombinationBuilder,n=this.equipedHeroFilter(),l=this.combinationFilter(),c=0,u=this.store.weapons.length;c<u;c++){a.weapon(this.store.weapons[c]);for(var d=0,p=this.store.helmets.length;d<p;d++){a.helmet(this.store.helmets[d]);for(var h=0,f=this.store.armors.length;h<f;h++)if(a.armor(this.store.armors[h]),l(a,3))for(var v=0,m=this.store.necklaces.length;v<m;v++)if(a.necklace(this.store.necklaces[v]),l(a,2))for(var b=0,g=this.store.rings.length;b<g;b++)if(a.ring(this.store.rings[b]),l(a,1)){for(var k=0,_=this.store.boots.length;k<_;k++)if(a.boot(this.store.boots[k]),!++t||l(a,0)){var x=s["a"].apply(a.build(i),this.profile.hero);if(n(x)&&(r.push(x),r.length>=e.OPTIMIZE_RESULT_LIMIT))return console.log("optimize::hit result limit, actualCount =",t,", result.length =",r.length),r;if(++i%e.REPORT_PROGRESS_COUNT==0&&(console.log("optimize::actualCount =",t,",count =",i,",result.length =",r.length),this.progressCallback(i),i>=e.COMBINATION_HARD_LIMIT))return console.log("optimize::hit combination hard limit"),r}}else t+=this.store.boots.length;else t+=this.store.rings.length*this.store.boots.length;else t+=this.store.necklaces.length*this.store.rings.length*this.store.boots.length}}return r}}]),e}();n.COMBINATION_HARD_LIMIT=1e7,n.OPTIMIZE_RESULT_LIMIT=5e4,n.REPORT_PROGRESS_COUNT=n.COMBINATION_HARD_LIMIT/10},"91b0":function(e,t,i){e.exports=i.p+"js/0.7e410230.worker.js"},d0cd:function(e,t,i){},dac0:function(e,t,i){"use strict";i("4de4"),i("c975"),i("d81d");var r=i("d4ec"),a=i("bee2"),o=i("0d59"),s=function(){function e(){Object(r["a"])(this,e),this.noopFilter=function(e){return!0}}return Object(a["a"])(e,[{key:"filter",value:function(e,t,i){var r=this.noopFilter;t.sets.length>0&&(r=function(e){return t.sets.indexOf(e.set)>=0});var a=this.noopFilter;t.enhanceMode==o["b"].EnhanceModeFilter.LESS_THAN_15?a=function(e){return e.enhance<15}:t.enhanceMode==o["b"].EnhanceModeFilter.ONLY_15&&(a=function(e){return 15==e.enhance});var s=this.noopFilter;if(t.necklaces.length>0){var n=t.necklaces.map((function(e){return e.value}));s=function(e){return e.type!=o["b"].Type.Necklace||n.indexOf(e.main.value)>=0}}var l=this.noopFilter;if(t.rings.length>0){var c=t.rings.map((function(e){return e.value}));l=function(e){return e.type!=o["b"].Type.Ring||c.indexOf(e.main.value)>=0}}var u=this.noopFilter;if(t.boots.length>0){var d=t.boots.map((function(e){return e.value}));u=function(e){return e.type!=o["b"].Type.Boot||d.indexOf(e.main.value)>=0}}var p=this.noopFilter;t.locked||(p=function(e){return!e.locked});var h=this.noopFilter;return t.equipped||(h=i.heroId?function(e){return""==e.equippedHero||e.equippedHero==i.heroId}:function(e){return""==e.equippedHero}),e.filter((function(e){return p(e)&&h(e)&&r(e)&&a(e)&&s(e)&&l(e)&&u(e)}))}}]),e}();t["a"]=new s},f8d9:function(e,t,i){"use strict";(function(e){i("4de4"),i("4160"),i("a434"),i("159b");var r=i("5530"),a=(i("96cf"),i("1da1")),o=i("d4ec"),s=i("bee2"),n=i("262e"),l=i("2caf"),c=i("9ab4"),u=i("3617"),d=i("0d59"),p=i("8131"),h=i("dac0"),f=i("5549"),v=i("60a3"),m=i("2f62"),b=function(t){Object(n["a"])(r,t);var i=Object(l["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=i.apply(this,arguments),t.worker=new Worker(e,void 0),t.profile={id:"",hero:{},filter:{},stat:{},combination:{}},t.result=[],t.selectedCombination={},t.progress=0,t.popupMsg=0,t.headers=[{text:"Set",value:"combination.sets",sortable:!1},{text:"HP",value:"hp"},{text:"DEF",value:"def"},{text:"ATK",value:"atk"},{text:"CRI",value:"cri"},{text:"C.DMG",value:"cdmg"},{text:"SPD",value:"spd"},{text:"EFF",value:"eff"},{text:"RES",value:"res"},{text:"Damage",value:"damage"},{text:"EHP",value:"ehp"}],t}return Object(s["a"])(r,[{key:"optimize",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("optimize::start"),this.result.splice(0,this.result.length),this.worker.postMessage({action:"optimize",store:this.gearStore,profile:this.profile});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.profile.hero.id||(this.profile.hero=this.e7db.heros[34]),this.result.splice(0,this.result.length),this.profile.filter=Object.assign({},d["a"].GEAR_FILTER_DEFAULT),this.profile.stat={hp:{},def:{},atk:{},cri:{max:110},cdmg:{max:360},spd:{},eff:{},res:{},ehp:{},damage:{}},this.profile.combination={forcedSets:[]},this.equippedHero&&(console.log("reset::profile.hero.id =",this.profile.hero.id),this.selectedCombination=this.equippedHero.combination)}},{key:"clickRow",value:function(e,t){console.log("clickRow::item =",e),console.log("clickRow::e =",t),t.select(),this.selectedCombination=e.combination}},{key:"equipAll",value:function(){var e=this;if(console.log("equipAll::hero =",this.profile.hero),this.selectedCombination){this.unequipAll(),console.log("equipAll::selectedCombination =",this.selectedCombination);var t=this.selectedCombination;[t.weapon,t.helmet,t.armor,t.necklace,t.ring,t.boot].filter((function(e){return e.id})).forEach((function(t){t.equippedHero=e.profile.hero.id,e.updateGear(t)}))}}},{key:"unequipAll",value:function(){var e=this;if(this.equippedHero&&this.equippedHero.combination){console.log("unequipAll::",this.equippedHero.combination);var t=this.equippedHero.combination;[t.weapon,t.helmet,t.armor,t.necklace,t.ring,t.boot].filter((function(e){return e.id})).forEach((function(t){t.equippedHero="",e.updateGear(t)}))}}},{key:"saveProfile",value:function(){console.log("saveProfile::profile =",this.profile),this.updateProfiles([this.profile]),this.popupMsg=1}},{key:"loadProfile",value:function(){console.log("loadProfile::hero.id =",this.profile.hero.id);var e=this.getProfile(this.profile.hero.id);console.log("loadProfile::profile =",this.getProfile(this.profile.hero.id)),e&&Object.assign(this.profile,e)}},{key:"created",value:function(){var e=this;this.reset(),this.worker.onmessage=function(t){console.log("worker::onmessage::action =",t.data.action),"optimize-result"==t.data.action?e.result=t.data.result:"progress"==t.data.action&&(e.progress=t.data.result)}}},{key:"destroyed",value:function(){this.worker.terminate()}},{key:"gearStore",get:function(){return new d["b"].GearStore(h["a"].filter(this.gears,this.profile.filter,{heroId:this.profile.hero?this.profile.hero.id:""}))}},{key:"equippedHero",get:function(){if(this.profile.hero)return f["a"].apply(this.getEquipped(this.profile.hero.id),this.profile.hero)}},{key:"hardLimit",get:function(){return p["a"].COMBINATION_HARD_LIMIT}}]),r}(v["e"]);b=Object(c["a"])([Object(v["a"])({name:"optimizer-page",components:{GearDetailCard:u["a"],GearSetIcon:u["c"],OptimizationProfiler:u["g"]},computed:Object(r["a"])(Object(r["a"])({},Object(m["d"])(["gears","e7db"])),Object(m["c"])(["getEquipped","getProfile"])),methods:Object(m["b"])(["updateGear","updateProfiles"])})],b),t["a"]=b}).call(this,i("91b0"))}}]);
//# sourceMappingURL=gear.01d64a76.js.map